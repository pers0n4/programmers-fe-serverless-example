<!DOCTYPE html>
<html>
  <head>
    <title>Programmers FE Serverless Functions</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <form action="/api" method="get">
      <label for="username">Username</label>
      <input type="text" name="username" />
      <button type="submit">Submit</button>
    </form>
    <pre></pre>

    <script>
      const pre = document.querySelector("pre");
      const form = document.querySelector("form");

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        const formData = new FormData(form);
        const query = new URLSearchParams(formData);

        fetch("/api?" + query)
          .then((response) => response.json())
          .then((data) => {
            pre.innerHTML = JSON.stringify(data, null, 2);
          });
      });
    </script>
  </body>
</html>
